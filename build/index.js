(()=>{"use strict";var e,t={298(){const e=window.wp.element,t=window.wp.data,a=window.wp.i18n,__=(e,t)=>"undefined"!=typeof window&&window.wp&&window.wp.i18n?window.wp.i18n.__(e,t):e,n=[{id:"core/add-new-post",label:__("Create a new post","hey-wapuu"),explanation:__("Open the editor to start a new blog post.","hey-wapuu"),descriptions:["write a story","make a new blog post","create a post","new post","tell a secret","new article","share a thought","start a post"],url:"post-new.php"},{id:"core/add-new-page",label:__("Create a new page","hey-wapuu"),explanation:__("Open the editor to create a new static page.","hey-wapuu"),descriptions:["create a new page","make a static page","new about page","new contact page","add a page"],url:"post-new.php?post_type=page"},{id:"core/manage-posts",label:__("Manage all posts","hey-wapuu"),explanation:__("View and edit your existing blog posts.","hey-wapuu"),descriptions:["show all posts","view post list","manage my articles","all my stories"],url:"edit.php"},{id:"core/manage-categories",label:__("Manage categories","hey-wapuu"),explanation:__("Organize your posts into categories.","hey-wapuu"),descriptions:["manage categories","edit categories","post categories"],url:"edit-tags.php?taxonomy=category"},{id:"core/manage-tags",label:__("Manage tags","hey-wapuu"),explanation:__("Organize your posts using tags.","hey-wapuu"),descriptions:["manage tags","edit tags","post tags"],url:"edit-tags.php?taxonomy=post_tag"},{id:"core/manage-pages",label:__("Manage all pages","hey-wapuu"),explanation:__("View and edit your existing static pages.","hey-wapuu"),descriptions:["show all pages","view page list","manage pages","all my pages"],url:"edit.php?post_type=page"},{id:"core/open-media-library",label:__("Open media library","hey-wapuu"),explanation:__("View and manage your images, videos, and files.","hey-wapuu"),descriptions:["show pictures","find images","open gallery","uploaded files","photos library","manage media"],url:"upload.php"},{id:"core/add-new-media",label:__("Add new media","hey-wapuu"),explanation:__("Upload new files to your media library.","hey-wapuu"),descriptions:["upload image","add photo","new video","upload file","add media"],url:"media-new.php"},{id:"core/open-appearance-themes",label:__("Manage themes","hey-wapuu"),explanation:__("Change the appearance and design of your site.","hey-wapuu"),descriptions:["change look","find design","new theme","manage themes","appearance"],url:"themes.php"},{id:"core/open-site-editor",label:__("Open site editor","hey-wapuu"),explanation:__("Edit your site layout and design globally.","hey-wapuu"),descriptions:["edit site","change layout","full site editing","open editor","customize theme"],url:"site-editor.php"},{id:"core/open-navigation",label:__("Manage navigation","hey-wapuu"),explanation:__("Edit your site menus and navigation.","hey-wapuu"),descriptions:["edit navigation","change menus","site navigation"],url:"site-editor.php?path=%2Fnavigation"},{id:"core/open-styles",label:__("Edit site styles","hey-wapuu"),explanation:__("Change global colors, fonts, and styles.","hey-wapuu"),descriptions:["edit styles","change colors","typography","global styles"],url:"site-editor.php?path=%2Fstyles"},{id:"core/open-templates",label:__("Manage templates","hey-wapuu"),explanation:__("Edit page and post templates.","hey-wapuu"),descriptions:["show templates","manage blueprints","edit templates"],url:"site-editor.php?path=%2Ftemplates"},{id:"core/open-template-parts",label:__("Manage template parts","hey-wapuu"),explanation:__("Edit headers, footers, and other template components.","hey-wapuu"),descriptions:["show template parts","edit header","edit footer"],url:"site-editor.php?path=%2Ftemplate-parts"},{id:"core/open-patterns",label:__("Manage patterns","hey-wapuu"),explanation:__("Create and manage reusable block patterns.","hey-wapuu"),descriptions:["manage patterns","show patterns","reusable blocks"],url:"site-editor.php?path=%2Fpatterns"},{id:"core/open-appearance-menus",label:__("Manage menus","hey-wapuu"),explanation:__("Edit your navigation menus.","hey-wapuu"),descriptions:["change menu","edit navigation","fix links","menu settings"],url:"nav-menus.php"},{id:"core/open-appearance-widgets",label:__("Manage widgets","hey-wapuu"),explanation:__("Edit sidebars and footers using widgets.","hey-wapuu"),descriptions:["change widgets","edit sidebar","add footer blocks","manage widgets"],url:"widgets.php"},{id:"core/open-appearance-customizer",label:__("Open customizer","hey-wapuu"),explanation:__("Customize your site appearance with live preview.","hey-wapuu"),descriptions:["open customizer","change colors","header settings","site identity"],url:"customize.php"},{id:"core/manage-users",label:__("Manage users","hey-wapuu"),explanation:__("View and manage all site users.","hey-wapuu"),descriptions:["show users","view team","manage people","who is here"],url:"users.php"},{id:"core/add-new-user",label:__("Add new user","hey-wapuu"),explanation:__("Create a new user account for your site.","hey-wapuu"),descriptions:["add user","new member","invite person","create account"],url:"user-new.php"},{id:"core/open-user-profile",label:__("Edit my profile","hey-wapuu"),explanation:__("Manage your personal account settings.","hey-wapuu"),descriptions:["my profile","edit me","change my password","my account","who am i"],url:"profile.php"},{id:"core/manage-comments",label:__("Manage comments","hey-wapuu"),explanation:__("View and moderate site comments.","hey-wapuu"),descriptions:["show comments","see feedback","read messages","who commented"],url:"edit-comments.php"},{id:"core/open-plugins",label:__("Manage plugins","hey-wapuu"),explanation:__("View and manage your installed plugins.","hey-wapuu"),descriptions:["add features","manage extensions","installed plugins","new tools"],url:"plugins.php"},{id:"core/add-new-plugin",label:__("Add new plugin","hey-wapuu"),explanation:__("Search for and install new plugins.","hey-wapuu"),descriptions:["install plugin","search plugins","add new plugin"],url:"plugin-install.php"},{id:"core/open-settings-general",label:__("General settings","hey-wapuu"),explanation:__("Manage core site settings and information.","hey-wapuu"),descriptions:["site title","change description","general settings","change name"],url:"options-general.php"},{id:"core/open-settings-writing",label:__("Writing settings","hey-wapuu"),explanation:__("Manage settings related to post creation.","hey-wapuu"),descriptions:["writing settings","default category","post via email"],url:"options-writing.php"},{id:"core/open-settings-reading",label:__("Reading settings","hey-wapuu"),explanation:__("Manage how content is displayed to visitors.","hey-wapuu"),descriptions:["reading settings","homepage settings","how many posts"],url:"options-reading.php"},{id:"core/open-settings-discussion",label:__("Discussion settings","hey-wapuu"),explanation:__("Manage comment settings and moderation rules.","hey-wapuu"),descriptions:["discussion settings","comment rules","avatars"],url:"options-discussion.php"},{id:"core/open-settings-media",label:__("Media settings","hey-wapuu"),explanation:__("Manage image sizes and upload organization.","hey-wapuu"),descriptions:["media settings","image sizes","organize uploads"],url:"options-media.php"},{id:"core/open-settings-permalinks",label:__("Permalink settings","hey-wapuu"),explanation:__("Manage URL structure for your site.","hey-wapuu"),descriptions:["permalink settings","change urls","link structure"],url:"options-permalink.php"},{id:"core/open-settings-privacy",label:__("Privacy settings","hey-wapuu"),explanation:__("Manage your privacy policy and data settings.","hey-wapuu"),descriptions:["privacy settings","privacy policy"],url:"options-privacy.php"},{id:"core/open-tools-available",label:__("Available tools","hey-wapuu"),explanation:__("View additional tools available for your site.","hey-wapuu"),descriptions:["available tools","show all tools"],url:"tools.php"},{id:"core/open-tools-site-health",label:__("Site health","hey-wapuu"),explanation:__("Check your site health and status.","hey-wapuu"),descriptions:["site health","is my site okay","check for problems"],url:"site-health.php"},{id:"core/open-tools-export",label:__("Export content","hey-wapuu"),explanation:__("Export your site content to an XML file.","hey-wapuu"),descriptions:["export content","download my site","back up my stories","save my work"],url:"export.php"},{id:"core/open-tools-import",label:__("Import content","hey-wapuu"),explanation:__("Import content from other sites.","hey-wapuu"),descriptions:["import content","upload site data","bring in stories"],url:"import.php"},{id:"core/open-tools-export-personal-data",label:__("Export personal data","hey-wapuu"),explanation:__("Export personal data for a specific user.","hey-wapuu"),descriptions:["export personal data","privacy export"],url:"export-personal-data.php"},{id:"core/open-tools-erase-personal-data",label:__("Erase personal data","hey-wapuu"),explanation:__("Erase personal data for a specific user.","hey-wapuu"),descriptions:["erase personal data","privacy erase"],url:"erase-personal-data.php"},{id:"core/open-updates",label:__("Check for updates","hey-wapuu"),explanation:__("Check for WordPress core, plugin, and theme updates.","hey-wapuu"),descriptions:["check for updates","update wordpress","update plugins","new versions"],url:"update-core.php"},{id:"core/toggle-distraction-free",label:__("Distraction-free mode","hey-wapuu"),explanation:__("Hide editor sidebars and toolbars for focused writing.","hey-wapuu"),descriptions:["distraction free mode","hide sidebar","clean editor","focus mode"]},{id:"core/toggle-spotlight-mode",label:__("Spotlight mode","hey-wapuu"),explanation:__("Focus on the currently selected block.","hey-wapuu"),descriptions:["spotlight mode","focus on block","dim other blocks"]},{id:"core/toggle-list-view",label:__("Show list view","hey-wapuu"),explanation:__("View the hierarchical structure of your blocks.","hey-wapuu"),descriptions:["list view","show blocks","outline","document structure"]},{id:"core/toggle-fullscreen-mode",label:__("Fullscreen mode","hey-wapuu"),explanation:__("Toggle fullscreen editing mode.","hey-wapuu"),descriptions:["fullscreen mode","max editor","big screen"]},{id:"core/toggle-feature-welcome-guide",label:__("Welcome guide","hey-wapuu"),explanation:__("Open the editor welcome guide.","hey-wapuu"),descriptions:["welcome guide","how to use editor","tutorial"]},{id:"core/toggle-fixed-toolbar",label:__("Fixed toolbar","hey-wapuu"),explanation:__("Fix the block toolbar to the top of the editor.","hey-wapuu"),descriptions:["fixed toolbar","top toolbar"]},{id:"core/open-preferences",label:__("Editor preferences","hey-wapuu"),explanation:__("Manage your editor settings and preferences.","hey-wapuu"),descriptions:["editor preferences","change settings"]},{id:"core/open-keyboard-shortcuts",label:__("Keyboard shortcuts","hey-wapuu"),explanation:__("View a list of available keyboard shortcuts.","hey-wapuu"),descriptions:["keyboard shortcuts","hotkeys"]},{id:"core/open-dashboard",label:__("Go to dashboard","hey-wapuu"),explanation:__("Return to the main WordPress dashboard.","hey-wapuu"),descriptions:["go home","main menu","wp-admin","start page","back to start"],url:"index.php"},{id:"core/view-site",label:__("View site","hey-wapuu"),explanation:__("View the public front-end of your site.","hey-wapuu"),descriptions:["show my website","visit site","preview live","how does it look","open front end"],url:"/"},{id:"wapuu/tell-joke",label:__("Tell a joke","hey-wapuu"),explanation:__("I can tell you a WordPress-related joke.","hey-wapuu"),descriptions:["tell me a joke","make me laugh","say something funny"],action:"joke"},{id:"wapuu/who-are-you",label:__("About me","hey-wapuu"),explanation:__("Learn more about who I am.","hey-wapuu"),descriptions:["who are you","what is a wapuu","tell me about yourself"],action:"about"},{id:"wapuu/sing-song",label:__("Sing a song","hey-wapuu"),explanation:__("I can sing a short song about WordPress.","hey-wapuu"),descriptions:["sing a song","can you sing","make music","sing for me"],action:"song"},{id:"wapuu/why-warm-up",label:__("Warming up","hey-wapuu"),explanation:__("Learn why I need to warm up my brain.","hey-wapuu"),descriptions:["why","why are you warming up","what are you doing"],action:"why"},{id:"wapuu/how-to-build",label:__("Building a site","hey-wapuu"),explanation:__("I can give you tips on building a great site.","hey-wapuu"),descriptions:["how to build","help me build","give me tips","how do i start","website advice"],action:"tips"},{id:"wapuu/what-can-you-do",label:__("Help","hey-wapuu"),explanation:__("See a list of all commands I can help with.","hey-wapuu"),descriptions:["help","what can you do","show me everything","commands list","capabilities"],action:"help"},{id:"wapuu/site-status",label:__("Site status","hey-wapuu"),explanation:__("Get a quick overview of your site status.","hey-wapuu"),descriptions:["site status","how is the site","check up","health"],action:"status"}];function s(e){return Array.isArray?Array.isArray(e):"[object Array]"===l(e)}function i(e){return"string"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e}function u(e){return null!=e}function c(e){return!e.trim().length}function l(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const h=Object.prototype.hasOwnProperty;class p{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let a=d(e);this._keys.push(a),this._keyMap[a.id]=a,t+=a.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function d(e){let t=null,a=null,n=null,r=1,o=null;if(i(e)||s(e))n=e,t=g(e),a=y(e);else{if(!h.call(e,"name"))throw new Error("Missing name property in key");const s=e.name;if(n=s,h.call(e,"weight")&&(r=e.weight,r<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(s));t=g(s),a=y(s),o=e.getFn}return{path:t,id:a,weight:r,src:n,getFn:o}}function g(e){return s(e)?e:e.split(".")}function y(e){return s(e)?e.join("."):e}var m={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(e,t){let a=[],n=!1;const c=(e,t,h)=>{if(u(e))if(t[h]){const p=e[t[h]];if(!u(p))return;if(h===t.length-1&&(i(p)||r(p)||function(e){return!0===e||!1===e||function(e){return o(e)&&null!==e}(e)&&"[object Boolean]"==l(e)}(p)))a.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(p));else if(s(p)){n=!0;for(let e=0,a=p.length;e<a;e+=1)c(p[e],t,h+1)}else t.length&&c(p,t,h+1)}else a.push(e)};return c(e,i(t)?t.split("."):t,0),n?a:a[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const w=/[^ ]+/g;class f{constructor({getFn:e=m.getFn,fieldNormWeight:t=m.fieldNormWeight}={}){this.norm=function(e=1,t=3){const a=new Map,n=Math.pow(10,t);return{get(t){const s=t.match(w).length;if(a.has(s))return a.get(s);const i=1/Math.pow(s,.5*e),r=parseFloat(Math.round(i*n)/n);return a.set(s,r),r},clear(){a.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,i(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();i(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,a=this.size();t<a;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!u(e)||c(e))return;let a={v:e,i:t,n:this.norm.get(e)};this.records.push(a)}_addObject(e,t){let a={i:t,$:{}};this.keys.forEach((t,n)=>{let r=t.getFn?t.getFn(e):this.getFn(e,t.path);if(u(r))if(s(r)){let e=[];const t=[{nestedArrIndex:-1,value:r}];for(;t.length;){const{nestedArrIndex:a,value:n}=t.pop();if(u(n))if(i(n)&&!c(n)){let t={v:n,i:a,n:this.norm.get(n)};e.push(t)}else s(n)&&n.forEach((e,a)=>{t.push({nestedArrIndex:a,value:e})})}a.$[n]=e}else if(i(r)&&!c(r)){let e={v:r,n:this.norm.get(r)};a.$[n]=e}}),this.records.push(a)}toJSON(){return{keys:this.keys,records:this.records}}}function b(e,t,{getFn:a=m.getFn,fieldNormWeight:n=m.fieldNormWeight}={}){const s=new f({getFn:a,fieldNormWeight:n});return s.setKeys(e.map(d)),s.setSources(t),s.create(),s}function _(e,{errors:t=0,currentLocation:a=0,expectedLocation:n=0,distance:s=m.distance,ignoreLocation:i=m.ignoreLocation}={}){const r=t/e.length;if(i)return r;const o=Math.abs(n-a);return s?r+o/s:o?1:r}const x=32;function C(e){let t={};for(let a=0,n=e.length;a<n;a+=1){const s=e.charAt(a);t[s]=(t[s]||0)|1<<n-a-1}return t}const v=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class A{constructor(e,{location:t=m.location,threshold:a=m.threshold,distance:n=m.distance,includeMatches:s=m.includeMatches,findAllMatches:i=m.findAllMatches,minMatchCharLength:r=m.minMatchCharLength,isCaseSensitive:o=m.isCaseSensitive,ignoreDiacritics:u=m.ignoreDiacritics,ignoreLocation:c=m.ignoreLocation}={}){if(this.options={location:t,threshold:a,distance:n,includeMatches:s,findAllMatches:i,minMatchCharLength:r,isCaseSensitive:o,ignoreDiacritics:u,ignoreLocation:c},e=o?e:e.toLowerCase(),e=u?v(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const l=(e,t)=>{this.chunks.push({pattern:e,alphabet:C(e),startIndex:t})},h=this.pattern.length;if(h>x){let e=0;const t=h%x,a=h-t;for(;e<a;)l(this.pattern.substr(e,x),e),e+=x;if(t){const e=h-x;l(this.pattern.substr(e),e)}}else l(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:a,includeMatches:n}=this.options;if(e=t?e:e.toLowerCase(),e=a?v(e):e,this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:s,distance:i,threshold:r,findAllMatches:o,minMatchCharLength:u,ignoreLocation:c}=this.options;let l=[],h=0,p=!1;this.chunks.forEach(({pattern:t,alphabet:a,startIndex:d})=>{const{isMatch:g,score:y,indices:w}=function(e,t,a,{location:n=m.location,distance:s=m.distance,threshold:i=m.threshold,findAllMatches:r=m.findAllMatches,minMatchCharLength:o=m.minMatchCharLength,includeMatches:u=m.includeMatches,ignoreLocation:c=m.ignoreLocation}={}){if(t.length>x)throw new Error("Pattern length exceeds max of 32.");const l=t.length,h=e.length,p=Math.max(0,Math.min(n,h));let d=i,g=p;const y=o>1||u,w=y?Array(h):[];let f;for(;(f=e.indexOf(t,g))>-1;){let e=_(t,{currentLocation:f,expectedLocation:p,distance:s,ignoreLocation:c});if(d=Math.min(e,d),g=f+l,y){let e=0;for(;e<l;)w[f+e]=1,e+=1}}g=-1;let b=[],C=1,v=l+h;const A=1<<l-1;for(let n=0;n<l;n+=1){let i=0,o=v;for(;i<o;)_(t,{errors:n,currentLocation:p+o,expectedLocation:p,distance:s,ignoreLocation:c})<=d?i=o:v=o,o=Math.floor((v-i)/2+i);v=o;let u=Math.max(1,p-o+1),m=r?h:Math.min(p+o,h)+l,f=Array(m+2);f[m+1]=(1<<n)-1;for(let i=m;i>=u;i-=1){let r=i-1,o=a[e.charAt(r)];if(y&&(w[r]=+!!o),f[i]=(f[i+1]<<1|1)&o,n&&(f[i]|=(b[i+1]|b[i])<<1|1|b[i+1]),f[i]&A&&(C=_(t,{errors:n,currentLocation:r,expectedLocation:p,distance:s,ignoreLocation:c}),C<=d)){if(d=C,g=r,g<=p)break;u=Math.max(1,2*p-g)}}if(_(t,{errors:n+1,currentLocation:p,expectedLocation:p,distance:s,ignoreLocation:c})>d)break;b=f}const k={isMatch:g>=0,score:Math.max(.001,C)};if(y){const e=function(e=[],t=m.minMatchCharLength){let a=[],n=-1,s=-1,i=0;for(let r=e.length;i<r;i+=1){let r=e[i];r&&-1===n?n=i:r||-1===n||(s=i-1,s-n+1>=t&&a.push([n,s]),n=-1)}return e[i-1]&&i-n>=t&&a.push([n,i-1]),a}(w,o);e.length?u&&(k.indices=e):k.isMatch=!1}return k}(e,t,a,{location:s+d,distance:i,threshold:r,findAllMatches:o,minMatchCharLength:u,includeMatches:n,ignoreLocation:c});g&&(p=!0),h+=y,g&&w&&(l=[...l,...w])});let d={isMatch:p,score:p?h/this.chunks.length:1};return p&&n&&(d.indices=l),d}}class k{constructor(e){this.pattern=e}static isMultiMatch(e){return M(e,this.multiRegex)}static isSingleMatch(e){return M(e,this.singleRegex)}search(){}}function M(e,t){const a=e.match(t);return a?a[1]:null}class E extends k{constructor(e,{location:t=m.location,threshold:a=m.threshold,distance:n=m.distance,includeMatches:s=m.includeMatches,findAllMatches:i=m.findAllMatches,minMatchCharLength:r=m.minMatchCharLength,isCaseSensitive:o=m.isCaseSensitive,ignoreDiacritics:u=m.ignoreDiacritics,ignoreLocation:c=m.ignoreLocation}={}){super(e),this._bitapSearch=new A(e,{location:t,threshold:a,distance:n,includeMatches:s,findAllMatches:i,minMatchCharLength:r,isCaseSensitive:o,ignoreDiacritics:u,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class F extends k{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,a=0;const n=[],s=this.pattern.length;for(;(t=e.indexOf(this.pattern,a))>-1;)a=t+s,n.push([t,a-1]);const i=!!n.length;return{isMatch:i,score:i?0:1,indices:n}}}const D=[class extends k{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},F,class extends k{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends k{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends k{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends k{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends k{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},E],S=D.length,B=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,I=new Set([E.type,F.type]);const N=[];function L(e,t){for(let a=0,n=N.length;a<n;a+=1){let n=N[a];if(n.condition(e,t))return new n(e,t)}return new A(e,t)}const j="$and",T="$path",W=e=>!(!e[j]&&!e.$or),$=e=>({[j]:Object.keys(e).map(t=>({[t]:e[t]}))});function R(e,t,{auto:a=!0}={}){const n=e=>{let r=Object.keys(e);const u=(e=>!!e[T])(e);if(!u&&r.length>1&&!W(e))return n($(e));if((e=>!s(e)&&o(e)&&!W(e))(e)){const n=u?e[T]:r[0],s=u?e.$val:e[n];if(!i(s))throw new Error((e=>`Invalid value for key ${e}`)(n));const o={keyId:y(n),pattern:s};return a&&(o.searcher=L(s,t)),o}let c={children:[],operator:r[0]};return r.forEach(t=>{const a=e[t];s(a)&&a.forEach(e=>{c.children.push(n(e))})}),c};return W(e)||(e=$(e)),n(e)}function O(e,t){const a=e.matches;t.matches=[],u(a)&&a.forEach(e=>{if(!u(e.indices)||!e.indices.length)return;const{indices:a,value:n}=e;let s={indices:a,value:n};e.key&&(s.key=e.key.src),e.idx>-1&&(s.refIndex=e.idx),t.matches.push(s)})}function P(e,t){t.score=e.score}class z{constructor(e,t={},a){this.options={...m,...t},this.options.useExtendedSearch,this._keyStore=new p(this.options.keys),this.setCollection(e,a)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof f))throw new Error("Incorrect 'index' type");this._myIndex=t||b(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){u(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let a=0,n=this._docs.length;a<n;a+=1){const s=this._docs[a];e(s,a)&&(this.removeAt(a),a-=1,n-=1,t.push(s))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:a,includeScore:n,shouldSort:s,sortFn:o,ignoreFieldNorm:u}=this.options;let c=i(e)?i(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=m.ignoreFieldNorm}){e.forEach(e=>{let a=1;e.matches.forEach(({key:e,norm:n,score:s})=>{const i=e?e.weight:null;a*=Math.pow(0===s&&i?Number.EPSILON:s,(i||1)*(t?1:n))}),e.score=a})}(c,{ignoreFieldNorm:u}),s&&c.sort(o),r(t)&&t>-1&&(c=c.slice(0,t)),function(e,t,{includeMatches:a=m.includeMatches,includeScore:n=m.includeScore}={}){const s=[];return a&&s.push(O),n&&s.push(P),e.map(e=>{const{idx:a}=e,n={item:t[a],refIndex:a};return s.length&&s.forEach(t=>{t(e,n)}),n})}(c,this._docs,{includeMatches:a,includeScore:n})}_searchStringList(e){const t=L(e,this.options),{records:a}=this._myIndex,n=[];return a.forEach(({v:e,i:a,n:s})=>{if(!u(e))return;const{isMatch:i,score:r,indices:o}=t.searchIn(e);i&&n.push({item:e,idx:a,matches:[{score:r,value:e,norm:s,indices:o}]})}),n}_searchLogical(e){const t=R(e,this.options),a=(e,t,n)=>{if(!e.children){const{keyId:a,searcher:s}=e,i=this._findMatches({key:this._keyStore.get(a),value:this._myIndex.getValueForItemAtKeyId(t,a),searcher:s});return i&&i.length?[{idx:n,item:t,matches:i}]:[]}const s=[];for(let i=0,r=e.children.length;i<r;i+=1){const r=e.children[i],o=a(r,t,n);if(o.length)s.push(...o);else if(e.operator===j)return[]}return s},n=this._myIndex.records,s={},i=[];return n.forEach(({$:e,i:n})=>{if(u(e)){let r=a(t,e,n);r.length&&(s[n]||(s[n]={idx:n,item:e,matches:[]},i.push(s[n])),r.forEach(({matches:e})=>{s[n].matches.push(...e)}))}}),i}_searchObjectList(e){const t=L(e,this.options),{keys:a,records:n}=this._myIndex,s=[];return n.forEach(({$:e,i:n})=>{if(!u(e))return;let i=[];a.forEach((a,n)=>{i.push(...this._findMatches({key:a,value:e[n],searcher:t}))}),i.length&&s.push({idx:n,item:e,matches:i})}),s}_findMatches({key:e,value:t,searcher:a}){if(!u(t))return[];let n=[];if(s(t))t.forEach(({v:t,i:s,n:i})=>{if(!u(t))return;const{isMatch:r,score:o,indices:c}=a.searchIn(t);r&&n.push({score:o,key:e,value:t,idx:s,norm:i,indices:c})});else{const{v:s,n:i}=t,{isMatch:r,score:o,indices:u}=a.searchIn(s);r&&n.push({score:o,key:e,value:s,norm:i,indices:u})}return n}}let U;function V(e){return U||(U=new z(n,{keys:["label","descriptions"],threshold:.4,includeScore:!0})),U.search(e).slice(0,3).map(e=>({id:e.item.id,score:1-e.score}))}z.version="7.1.0",z.createIndex=b,z.parseIndex=function(e,{getFn:t=m.getFn,fieldNormWeight:a=m.fieldNormWeight}={}){const{keys:n,records:s}=e,i=new f({getFn:t,fieldNormWeight:a});return i.setKeys(n),i.setIndexRecords(s),i},z.config=m,z.parseQuery=R,function(...e){N.push(...e)}(class{constructor(e,{isCaseSensitive:t=m.isCaseSensitive,ignoreDiacritics:a=m.ignoreDiacritics,includeMatches:n=m.includeMatches,minMatchCharLength:s=m.minMatchCharLength,ignoreLocation:i=m.ignoreLocation,findAllMatches:r=m.findAllMatches,location:o=m.location,threshold:u=m.threshold,distance:c=m.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:a,includeMatches:n,minMatchCharLength:s,findAllMatches:r,ignoreLocation:i,location:o,threshold:u,distance:c},e=t?e:e.toLowerCase(),e=a?v(e):e,this.pattern=e,this.query=function(e,t={}){return e.split("|").map(e=>{let a=e.trim().split(B).filter(e=>e&&!!e.trim()),n=[];for(let e=0,s=a.length;e<s;e+=1){const s=a[e];let i=!1,r=-1;for(;!i&&++r<S;){const e=D[r];let a=e.isMultiMatch(s);a&&(n.push(new e(a,t)),i=!0)}if(!i)for(r=-1;++r<S;){const e=D[r];let a=e.isSingleMatch(s);if(a){n.push(new e(a,t));break}}}return n})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:a,isCaseSensitive:n,ignoreDiacritics:s}=this.options;e=n?e:e.toLowerCase(),e=s?v(e):e;let i=0,r=[],o=0;for(let n=0,s=t.length;n<s;n+=1){const s=t[n];r.length=0,i=0;for(let t=0,n=s.length;t<n;t+=1){const n=s[t],{isMatch:u,indices:c,score:l}=n.search(e);if(!u){o=0,i=0,r.length=0;break}if(i+=1,o+=l,a){const e=n.constructor.type;I.has(e)?r=[...r,...c]:r.push(c)}}if(i){let e={isMatch:!0,score:o/i};return a&&(e.indices=r),e}}return{isMatch:!1,score:1}}});const H=e=>{if(!e||"string"!=typeof e)return"";let t=e.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]));return t=t.replace(/&lt;strong&gt;(.*?)&lt;\/strong&gt;/g,"<strong>$1</strong>"),t},K=window.ReactJSXRuntime,q=({text:t,speed:a=25,onComplete:n})=>{const[s,i]=(0,e.useState)(""),r=(0,e.useRef)(0),o=(0,e.useRef)(0);(0,e.useEffect)(()=>{let e;const s=u=>{if(o.current||(o.current=u),u-o.current>=a){if(!(r.current<t.length))return void(n&&n());i(t.slice(0,r.current+1)),r.current++,o.current=u}e=window.requestAnimationFrame(s)};return e=window.requestAnimationFrame(s),()=>window.cancelAnimationFrame(e)},[t,a,n]);const u=H(s).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("span",{dangerouslySetInnerHTML:{__html:u}}),r.current<t.length&&(0,K.jsx)("span",{className:"hw-typewriter-cursor"})]})},J=({type:e,data:t,onAction:n})=>{const s={drafts:(0,a.__)("Continue Writing","hey-wapuu"),updates:(0,a.__)("Updates Available","hey-wapuu"),media:(0,a.__)("Media Library Update","hey-wapuu"),post:(0,a.__)("Next Steps","hey-wapuu")};return(0,K.jsxs)("div",{className:"hw-action-card",children:[(0,K.jsx)("div",{className:"hw-card-header",children:(0,K.jsx)("span",{children:s[e]||(0,a.__)("Suggestion","hey-wapuu")})}),(0,K.jsx)("div",{className:"hw-card-body",children:t.message}),(0,K.jsxs)("div",{className:"hw-card-footer",children:[t.secondaryAction&&(0,K.jsx)("button",{className:"hw-card-btn is-secondary",onClick:()=>n(t.secondaryAction.id),children:t.secondaryAction.label}),(0,K.jsx)("button",{className:"hw-card-btn",onClick:()=>n(t.primaryAction.id),children:t.primaryAction.label})]})]})},Y=()=>{const s=window.heyWapuuConfig||{},[i,r]=(0,e.useState)(!1),[o,u]=(0,e.useState)(""),[c,l]=(0,e.useState)(()=>{try{const e=sessionStorage.getItem("hey_wapuu_history");return(e?JSON.parse(e):[]).map(e=>({...e,hasTyped:!0}))}catch(e){return[]}}),[h,p]=(0,e.useState)("idle"),[d,g]=(0,e.useState)([]),[y,m]=(0,e.useState)(!1),[w,f]=(0,e.useState)("happy"),[b,_]=(0,e.useState)(!1),x=(0,e.useRef)(null),C=(0,e.useRef)(null),v=(0,e.useRef)(null),A=(0,e.useRef)(null),k=(0,e.useRef)(null),M=(0,e.useMemo)(()=>({firstName:H(s.user?.firstName||(0,a.__)("Friend","hey-wapuu"))}),[s.user?.firstName]),E=(0,e.useMemo)(()=>({name:H(s.site?.name||(0,a.__)("your site","hey-wapuu")),draftCount:parseInt(s.site?.draftCount||0,10),pendingComments:parseInt(s.site?.pendingComments||0,10),mediaCount:parseInt(s.site?.mediaCount||0,10),hasUpdates:!!s.site?.hasUpdates,activePlugins:parseInt(s.site?.activePlugins||0,10),postCount:parseInt(s.site?.postCount||0,10)}),[s.site]),F=(0,e.useMemo)(()=>s.context||{},[s.context]),D=(0,e.useCallback)(e=>n.find(t=>t.id===e)||null,[]),S=(0,e.useCallback)(()=>{window.navigator?.vibrate&&window.navigator.vibrate(10)},[]),B=(()=>{const[t,n]=(0,e.useState)([]);return(0,e.useEffect)(()=>{const e=()=>{const e=document.querySelectorAll("#adminmenu a.wp-has-submenu, #adminmenu a.menu-top"),t=[];e.forEach(e=>{const n=e.innerText.replace(/\d+/g,"").replace(/<[^>]*>?/gm,"").trim(),s=e.getAttribute("href");n&&s&&!t.some(e=>e.label===n)&&(e=>!!e&&(e.startsWith("/")||e.startsWith("admin.php")||e.includes("wp-admin")))(s)&&t.push({id:`dynamic/${s}`,label:n,url:s,explanation:(0,a.sprintf)(/* translators: %s: menu label */ /* translators: %s: menu label */
(0,a.__)("Open the %s page","hey-wapuu"),n),isDynamic:!0})}),n(e=>JSON.stringify(e)===JSON.stringify(t)?e:t)};if("complete"!==document.readyState)return window.addEventListener("load",e),()=>window.removeEventListener("load",e);e()},[]),t})(),I=(0,e.useCallback)(e=>D(e)||B.find(t=>t.id===e),[B,D]),N=(0,e.useCallback)(()=>{m(!1),l(e=>[...e,{role:"ai",text:(0,a.__)("I encountered an error. Please try again.","hey-wapuu"),hasTyped:!1}])},[]),L=(0,e.useCallback)(e=>{const{matches:t,isLive:n}=e;if(n)return g(t),p(t.length>0?"results":"searching"),void(t.length>0&&"happy"===w&&(f("thinking"),setTimeout(()=>f("happy"),600)));p("idle"),m(!1),f("wiggle"),g(t);const s=t.length>0?I(t[0].id):null;let i;if(s){const e=[(0,a.sprintf)(/* translators: 1: user first name, 2: command explanation */ /* translators: 1: user first name, 2: command explanation */
(0,a.__)("I can help with that, %1$s. %2$s","hey-wapuu"),M.firstName,s.explanation),(0,a.sprintf)(/* translators: %s: user first name */ /* translators: %s: user first name */
(0,a.__)("You got it, %s.","hey-wapuu"),M.firstName),(0,a.sprintf)(/* translators: 1: user first name, 2: command explanation */ /* translators: 1: user first name, 2: command explanation */
(0,a.__)("I know where that is, %1$s. %2$s","hey-wapuu"),M.firstName,s.explanation),(0,a.sprintf)(/* translators: 1: user first name, 2: command explanation */ /* translators: 1: user first name, 2: command explanation */
(0,a.__)("That is a great idea, %1$s. %2$s","hey-wapuu"),M.firstName,s.explanation)];i=e[Math.floor(Math.random()*e.length)]}else{const e=[(0,a.__)("Hmm, I don't know that yet. Try asking to start a post or open the media library.","hey-wapuu"),(0,a.__)("I could not find a matching command. Can we try a different search?","hey-wapuu"),(0,a.sprintf)(/* translators: %s: user first name */ /* translators: %s: user first name */
(0,a.__)("I am not sure how to do that, %s. Should we try one of these instead?","hey-wapuu"),M.firstName),(0,a.__)("I have not learned that yet. Want to see what I can do?","hey-wapuu")];i=e[Math.floor(Math.random()*e.length)],g([{id:"core/add-new-post",score:.1},{id:"core/open-media-library",score:.1},{id:"wapuu/tell-joke",score:.1}])}l(e=>[...e,{role:"ai",text:i,hasTyped:!1}]),setTimeout(()=>{f("happy"),_(!1)},1500)},[M.firstName,w,I]),{workerStatus:j,loadingProgress:T,isReadyNotification:W,isStuck:$,forceRestart:R,postToWorker:O}=(({dynamicCommands:t,onResults:a,onError:n})=>{const[s,i]=(0,e.useState)("idle"),[r,o]=(0,e.useState)(0),[u,c]=(0,e.useState)(!1),[l,h]=(0,e.useState)(Date.now()),p=(0,e.useRef)(null),d=(0,e.useCallback)(()=>{p.current&&(p.current.terminate(),p.current=null),i("idle"),h(Date.now())},[]),g=(0,e.useMemo)(()=>("initializing"===s||"loading"===s)&&Date.now()-l>15e3,[s,l]);(0,e.useEffect)(()=>{const e=void 0!==window.BroadcastChannel?new BroadcastChannel("hey_wapuu_sync"):null;let t=null;return"idle"===s&&(t=setTimeout(()=>{if(!p.current&&window.Worker){i("initializing");try{const t=heyWapuuConfig.workerUrl;p.current=new Worker(t,{type:"module"}),p.current.postMessage({type:"init",data:{embeddingsUrl:heyWapuuConfig.embeddingsUrl,modelUrl:heyWapuuConfig.modelUrl,version:heyWapuuConfig.version}}),p.current.onmessage=t=>{const{type:s,data:r}=t.data;if("status"===s)if("ready"===r.status)i("ready"),o(100),c(!0),setTimeout(()=>c(!1),3e3),e?.postMessage({type:"ready"});else if("loading"===r.status)i("loading");else if("downloading"===r.status){if(i("downloading"),r.percent){const t=parseInt(r.percent,10);isNaN(t)||(o(t),e?.postMessage({type:"progress",percent:t}))}}else"error"===r.status&&i("error");else"error"===s?n():"results"===s&&a(r)},p.current.onerror=e=>{console.error("Wapuu Trace: Worker Error ->",e),i("error")}}catch(e){console.error("Wapuu Trace: Boot Exception ->",e),i("error")}}},500)),()=>{t&&clearTimeout(t),p.current&&"error"===s&&(p.current.terminate(),p.current=null),e?.close()}},[s,n,a]),(0,e.useEffect)(()=>{"ready"===s&&t.length>0&&p.current&&p.current.postMessage({type:"learn",data:{commands:t}})},[s,t]);const y=(0,e.useCallback)(e=>{p.current&&p.current.postMessage(e)},[]);return{workerStatus:s,loadingProgress:r,isReadyNotification:u,isStuck:g,forceRestart:d,postToWorker:y}})({dynamicCommands:B,onResults:L,onError:N}),P=(0,e.useCallback)(e=>{const t=(e||o).trim();if(!t)return;S(),l(e=>[...e,{role:"user",text:t}]),e||u(""),p("thinking"),m(!0),f("thinking");const n=V(t);n.some(e=>{const a=I(e.id);return a&&a.label.toLowerCase().includes(t.toLowerCase())})&&1===n.length?setTimeout(()=>{m(!1),f("happy"),g(n),l(e=>[...e,{role:"ai",text:(0,a.sprintf)(/* translators: %s: user first name */ /* translators: %s: user first name */
(0,a.__)("I have found that for you, %s.","hey-wapuu"),M.firstName),hasTyped:!1}])},50):"ready"===j?O({type:"query",data:{text:t,context:F.postType||F.screenId}}):setTimeout(()=>{const e=V(t);m(!1),f("happy"),e.length>0?(g(e),l(e=>[...e,{role:"ai",text:(0,a.__)("I am still initializing, but here are some likely matches.","hey-wapuu"),hasTyped:!1}])):l(e=>[...e,{role:"ai",text:(0,a.__)("Please wait a moment while I finish loading my database.","hey-wapuu"),hasTyped:!1}])},600)},[o,j,F,S,M.firstName,O,I]),z=(0,e.useCallback)(e=>{u(e),setTimeout(()=>P(e),500)},[P]),{isListening:U,toggleListening:Y}=(t=>{const[a,n]=(0,e.useState)(!1),s=(0,e.useRef)(null);(0,e.useEffect)(()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;return e&&(s.current=new e,s.current.continuous=!1,s.current.interimResults=!1,s.current.lang="en-US",s.current.onresult=e=>{const a=e.results[0][0].transcript;n(!1),t(a)},s.current.onerror=()=>n(!1),s.current.onend=()=>n(!1)),()=>{s.current&&s.current.stop()}},[t]);const i=(0,e.useCallback)(()=>{if(a)s.current?.stop();else try{n(!0),s.current?.start()}catch(e){n(!1)}},[a]);return{isListening:a,toggleListening:i}})(z),{executeCommand:G}=(0,t.useDispatch)("core/commands"),X=(0,t.useSelect)(e=>e("core/commands").getCommands(),[]),Q=(0,e.useCallback)(e=>{const t={joke:()=>{const e=[(0,a.__)("Why did the WordPress developer go broke? Because he kept giving out all his themes for free.","hey-wapuu"),(0,a.__)("What is a WordPress developer's favorite drink? Root beer.","hey-wapuu"),(0,a.__)("How many WordPress developers does it take to change a lightbulb? Just one, but they'll need to install 20 plugins first.","hey-wapuu"),(0,a.__)("Why was the WordPress site so good at baseball? Because it had a great pitch.","hey-wapuu"),(0,a.__)('What did the server say to the plugin? "You\'re really starting to get on my nerves!"',"hey-wapuu")];l(t=>[...t,{role:"ai",text:e[Math.floor(Math.random()*e.length)]}])},about:()=>{l(e=>[...e,{role:"ai",text:(0,a.__)('I am a mythical creature called a "Kappa" from Tokyo, Japan. I am here to help you build with WordPress.',"hey-wapuu")}])},song:()=>{l(e=>[...e,{role:"ai",text:(0,a.__)("WordPress is the place to be, building worlds for you and me. With a block here and a block there, we make magic everywhere.","hey-wapuu")}])},why:()=>{l(e=>[...e,{role:"ai",text:(0,a.__)("I use a local machine learning model to understand your requests directly in your browser.","hey-wapuu")}])},tips:()=>{const e=[(0,a.__)("Start with a clear title for your post.","hey-wapuu"),(0,a.__)("Use the media library to manage your images.","hey-wapuu"),(0,a.__)("Use the site editor to change global styles and colors.","hey-wapuu"),(0,a.__)('Create pages for static content like "About" or "Contact".',"hey-wapuu")];l(t=>[...t,{role:"ai",text:e[Math.floor(Math.random()*e.length)]}])},help:()=>{l(e=>[...e,{role:"ai",text:(0,a.__)("I can help you manage posts, pages, media, and styles. Try asking things like:","hey-wapuu")+'\n\n• "Create a new post"\n• "Show media library"\n• "Open site editor"\n• "Tell me a joke"'}]),g([{id:"core/add-new-post",score:.1},{id:"core/open-media-library",score:.1},{id:"core/open-site-editor",score:.1},{id:"wapuu/tell-joke",score:.1}])},status:()=>{let e=(0,a.sprintf)(/* translators: 1: theme name, 2: active plugins count */ /* translators: 1: theme name, 2: active plugins count */
(0,a.__)("Your site is using the **%1$s** theme and has **%2$d** active plugins.","hey-wapuu"),s.site?.themeName||"WordPress",E.activePlugins);E.pendingComments>0&&(e+="\n\n"+(0,a.sprintf)(/* translators: %d: number of pending comments */ /* translators: %d: number of pending comments */
(0,a.__)("There are %d comments pending moderation.","hey-wapuu"),E.pendingComments)),E.hasUpdates&&(e+="\n\n"+(0,a.__)("There are updates available for your site.","hey-wapuu")),l(t=>[...t,{role:"ai",text:e}])}};t[e]&&t[e]()},[E,M.firstName,s.site?.themeName]),Z=(0,e.useCallback)(e=>{const t=I(e);t&&(g([]),t.action?Q(t.action):(l(e=>[...e,{role:"ai",text:(0,a.__)("Navigating to your destination.","hey-wapuu")}]),f("celebrate"),sessionStorage.setItem("hey_wapuu_arrival",JSON.stringify({id:e,label:t.label,time:Date.now()})),setTimeout(()=>{if(X.some(t=>t.name===e))G(e),r(!1);else if(t.url){const e="undefined"!=typeof ajaxurl?ajaxurl.replace("admin-ajax.php",""):"/wp-admin/";window.location.href=t.url.startsWith("/")?t.url:e+t.url}},800)))},[X,G,Q,I]),ee=(0,e.useCallback)(()=>{const e=F.screenId||"",t=!!F.isEditing;return"site-editor"===e?{name:(0,a.__)("the editor","hey-wapuu"),nudge:(0,a.__)("Want to change your site appearance?","hey-wapuu")}:t?{name:(0,a.__)("the editor","hey-wapuu"),nudge:(0,a.__)("Need help with this post?","hey-wapuu")}:"plugins"===e?{name:(0,a.__)("plugins","hey-wapuu"),nudge:(0,a.__)("Looking for new features?","hey-wapuu")}:"upload"===e?{name:(0,a.__)("media","hey-wapuu"),nudge:(0,a.__)("Searching for a file?","hey-wapuu")}:"themes"===e?{name:(0,a.__)("themes","hey-wapuu"),nudge:(0,a.__)("Checking out new designs?","hey-wapuu")}:"users"===e?{name:(0,a.__)("users","hey-wapuu"),nudge:(0,a.__)("Managing your team?","hey-wapuu")}:{name:(0,a.__)("this page","hey-wapuu"),nudge:(0,a.__)("How can I help you today?","hey-wapuu")}},[F]),te=(0,e.useCallback)(()=>{try{const e=new Audio("https://s3.amazonaws.com/freecodecamp/drums/Give_us_a_light.mp3");e.volume=.05;const t=e.play();void 0!==t&&t.catch(()=>{})}catch(e){}},[]);(0,e.useEffect)(()=>{if(o.trim()){if("ready"===j)return p("searching"),k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{O({type:"query",data:{text:o,context:F.postType||F.screenId,dynamicCommands:B,isLive:!0}})},400),()=>clearTimeout(k.current)}else"searching"===h&&(p("idle"),g([]))},[o,j,B,F,y,h,O]),(0,e.useEffect)(()=>{c.length>0&&sessionStorage.setItem("hey_wapuu_history",JSON.stringify(c.slice(-50))),c.length>0&&"ai"===c[c.length-1].role&&te()},[c,te]),(0,e.useEffect)(()=>{const e=e=>{if((e.altKey||e.ctrlKey&&!e.metaKey)&&"KeyW"===e.code)return r(e=>!e),e.preventDefault(),void e.stopPropagation();if(i){if("Escape"===e.key)return r(!1),e.preventDefault(),e.stopPropagation(),void v.current?.focus();if("Tab"===e.key&&A.current){const t=A.current.querySelectorAll('button:not(:disabled), input:not(:disabled), [tabindex]:not([tabindex="-1"])'),a=Array.from(t);if(0===a.length)return;const n=a[0],s=a[a.length-1],i=A.current.ownerDocument.activeElement;e.shiftKey&&i===n?(s.focus(),e.preventDefault()):e.shiftKey||i!==s||(n.focus(),e.preventDefault())}}};return window.addEventListener("keydown",e,!0),()=>window.removeEventListener("keydown",e,!0)},[i]),(0,e.useEffect)(()=>{if(i){const e=setTimeout(()=>C.current?.focus(),100);return()=>clearTimeout(e)}},[i]),(0,e.useEffect)(()=>{const e=sessionStorage.getItem("hey_wapuu_arrival");if(e){try{const{id:t,label:n,time:s}=JSON.parse(e);if(Date.now()-s<6e4){let e=(0,a.sprintf)(/* translators: %s: destination label */ /* translators: %s: destination label */
(0,a.__)("You have arrived at: **%s**. How else can I help?","hey-wapuu"),n);"core/add-new-post"===t?e=(0,a.__)("You can now start writing your new post.","hey-wapuu"):"core/open-media-library"===t?e=(0,a.__)("You are now in the media library.","hey-wapuu"):"core/open-site-editor"===t&&(e=(0,a.__)("You are now in the site editor.","hey-wapuu")),setTimeout(()=>{l(t=>[...t,{role:"ai",text:e,hasTyped:!1}]),"core/add-new-post"===t&&setTimeout(()=>{l(e=>[...e,{role:"ai",type:"card",cardType:"post",hasTyped:!0,data:{message:(0,a.__)("Need help with writing headlines?","hey-wapuu"),primaryAction:{id:"wapuu/show-tips",label:(0,a.__)("Show Tips","hey-wapuu")}}}])},3e3),r(!0),f("celebrate"),setTimeout(()=>f("happy"),2e3)},1e3)}}catch(e){}sessionStorage.removeItem("hey_wapuu_arrival")}if(0===c.length){const e=(new Date).getHours();let t=(0,a.__)("Good morning","hey-wapuu");e>=12&&e<18?t=(0,a.__)("Good afternoon","hey-wapuu"):e>=18&&(t=(0,a.__)("Good evening","hey-wapuu"));const n=ee().nudge,s=[(0,a.sprintf)(/* translators: 1: time greeting (e.g. Good morning), 2: user first name, 3: site name, 4: contextual note */ /* translators: 1: time greeting (e.g. Good morning), 2: user first name, 3: site name, 4: contextual note */
(0,a.__)("%1$s, %2$s. What can I help you build on **%3$s** today? %4$s","hey-wapuu"),t,M.firstName,E.name,n),(0,a.sprintf)(/* translators: 1: user first name, 2: site name, 3: contextual note */ /* translators: 1: user first name, 2: site name, 3: contextual note */
(0,a.__)("Hi %1$s. How can I help you with **%2$s**? %3$s","hey-wapuu"),M.firstName,E.name,n),(0,a.sprintf)(/* translators: 1: user first name, 2: site name, 3: contextual note */ /* translators: 1: user first name, 2: site name, 3: contextual note */
(0,a.__)("Welcome back, %1$s. I am ready to help with **%2$s**. %3$s","hey-wapuu"),M.firstName,E.name,n)];let i=s[Math.floor(Math.random()*s.length)];E.draftCount>0&&!F.isEditing&&(i+=" "+(0,a.sprintf)(/* translators: %d: number of draft posts */ /* translators: %d: number of draft posts */
(0,a.__)("You have %d draft posts.","hey-wapuu"),E.draftCount)),E.pendingComments>0&&(i+=" "+(0,a.sprintf)(/* translators: %d: number of pending comments */ /* translators: %d: number of pending comments */
(0,a.__)("There are %d comments pending moderation.","hey-wapuu"),E.pendingComments)),E.hasUpdates&&(i+=" "+(0,a.__)("There are updates available for your site.","hey-wapuu")),E.mediaCount>50&&Math.random()>.7&&(i+=" "+(0,a.sprintf)(/* translators: %d: number of media items */ /* translators: %d: number of media items */
(0,a.__)("Your media library contains %d items.","hey-wapuu"),E.mediaCount)),setTimeout(()=>l([{role:"ai",text:i,isInitial:!0,hasTyped:!1}]),300)}},[c.length,F,E,M.firstName,ee,I]),(0,e.useEffect)(()=>{"ready"===j&&1===c.length&&c[0].isInitial&&setTimeout(()=>{E.draftCount>0?l(e=>[...e,{role:"ai",type:"card",cardType:"drafts",hasTyped:!0,data:{message:(0,a.sprintf)(/* translators: %d: draft count */ /* translators: %d: draft count */
(0,a.__)("You have %d draft posts. Would you like to view them?","hey-wapuu"),E.draftCount),primaryAction:{id:"core/open-post-library",label:(0,a.__)("View Drafts","hey-wapuu")}}}]):E.hasUpdates?l(e=>[...e,{role:"ai",type:"card",cardType:"updates",hasTyped:!0,data:{message:(0,a.__)("There are updates available for your site.","hey-wapuu"),primaryAction:{id:"core/open-updates",label:(0,a.__)("Update Now","hey-wapuu")}}}]):0===E.postCount&&l(e=>[...e,{role:"ai",type:"card",cardType:"post",hasTyped:!0,data:{message:(0,a.__)("Your site has no posts. Would you like to create one?","hey-wapuu"),primaryAction:{id:"core/add-new-post",label:(0,a.__)("Create Post","hey-wapuu")}}}])},2e3)},[j,E,c]),(0,e.useEffect)(()=>{_("thinking"===w||"celebrate"===w)},[w]);const ae=["hw-summoner",i?"is-active":"",W?"is-ready-notification":"",`mood-${w}`].filter(Boolean).join(" ");let ne=(0,a.__)("Type a message...","hey-wapuu");return"ready"!==j?(ne=(0,a.__)("Initializing...","hey-wapuu"),$&&(ne=(0,a.__)("System error. Click to restart.","hey-wapuu"))):U&&(ne=(0,a.__)("Listening...","hey-wapuu")),(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("button",{ref:v,className:ae,onClick:()=>$?R():r(!i),"aria-expanded":i,"aria-haspopup":"dialog","aria-label":i?(0,a.__)("Close Chat","hey-wapuu"):(0,a.__)("Open Chat","hey-wapuu"),children:$?"🔄":i?"×":"💬"}),i&&(0,K.jsxs)("div",{className:"hw-chat-window "+(b?"is-glowing":""),role:"dialog","aria-modal":"true","aria-label":(0,a.__)("Wapuu Assistant","hey-wapuu"),ref:A,children:[(0,K.jsxs)("div",{className:"hw-chat-header",children:[(0,K.jsx)("h2",{id:"hw-chat-title",children:$?(0,a.__)("System Restart","hey-wapuu"):(0,a.sprintf)(/* translators: %s: user first name */ /* translators: %s: user first name */
(0,a.__)("Hi %s","hey-wapuu"),M.firstName)}),(0,K.jsxs)("div",{className:"hw-header-actions",children:[$&&(0,K.jsx)("button",{onClick:R,className:"hw-wake-btn",title:(0,a.__)("Force Restart AI","hey-wapuu"),children:(0,a.__)("Wake Up","hey-wapuu")}),(0,K.jsx)("button",{onClick:()=>Q("help"),disabled:"ready"!==j,"aria-label":(0,a.__)("Help","hey-wapuu"),className:"hw-help-btn",title:(0,a.__)("Help","hey-wapuu"),children:"?"}),(0,K.jsx)("button",{onClick:clearChat,disabled:"ready"!==j,"aria-label":(0,a.__)("Clear Chat","hey-wapuu"),className:"hw-clear-btn",title:(0,a.__)("Clear Chat","hey-wapuu"),children:(0,a.__)("Clear","hey-wapuu")}),(0,K.jsx)("button",{onClick:()=>r(!1),"aria-label":(0,a.__)("Close Chat","hey-wapuu"),className:"hw-close-btn",children:"×"})]})]}),"ready"!==j&&(0,K.jsx)("div",{className:"hw-progress-container",title:(0,a.sprintf)(/* translators: %d: progress percentage */ /* translators: %d: progress percentage */
(0,a.__)("Loading: %d%%","hey-wapuu"),T),children:(0,K.jsx)("div",{className:"hw-progress-bar",style:{width:`${T}%`}})}),(0,K.jsxs)("div",{className:"hw-chat-content",ref:x,role:"log","aria-live":"polite",children:[c.map((t,a)=>(0,K.jsxs)(e.Fragment,{children:[(0,K.jsx)("div",{className:`hw-bubble hw-bubble-${t.role}`,children:"ai"!==t.role||t.hasTyped?(0,K.jsx)("span",{dangerouslySetInnerHTML:{__html:H(t.text).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}}):(0,K.jsx)(q,{text:t.text,onComplete:()=>{l(e=>{const t=[...e];return t[a]={...t[a],hasTyped:!0},t})}})}),"card"===t.type&&(0,K.jsx)(J,{type:t.cardType,data:t.data,onAction:Z})]},a)),y&&(0,K.jsxs)("div",{className:"hw-bubble hw-bubble-ai hw-thinking","aria-busy":"true",children:[(0,K.jsx)("span",{className:"screen-reader-text",children:(0,a.__)("Thinking...","hey-wapuu")}),(0,K.jsx)("span",{children:"."}),(0,K.jsx)("span",{children:"."}),(0,K.jsx)("span",{children:"."})]})]}),("results"===h||d.length>0)&&(0,K.jsx)("div",{className:"hw-suggestions",children:d.map(e=>{const t=I(e.id);return t?(0,K.jsxs)("button",{className:"hw-match-card",onClick:()=>{Z(e.id),u("")},children:[(0,K.jsx)("strong",{children:(0,a.sprintf)(/* translators: %s: command label */ /* translators: %s: command label */
(0,a.__)("Go to %s","hey-wapuu"),t.label.toLowerCase().replace("!","").trim())}),(0,K.jsx)("span",{children:t.explanation})]},e.id):null})}),(0,K.jsxs)("div",{className:"hw-input-area "+("ready"!==j?"is-disabled":""),children:[(0,K.jsx)("button",{className:"hw-mic-btn "+(U?"is-listening":""),onClick:Y,disabled:"ready"!==j,"aria-label":U?(0,a.__)("Stop Listening","hey-wapuu"):(0,a.__)("Voice Input","hey-wapuu"),title:(0,a.__)("Voice Input","hey-wapuu"),children:U?"🛑":"🎤"}),(0,K.jsx)("input",{ref:C,type:"text",disabled:"ready"!==j,placeholder:ne,value:o,onChange:e=>u(e.target.value),onKeyDown:e=>"Enter"===e.key&&P(),"aria-label":(0,a.__)("Chat message","hey-wapuu")}),(0,K.jsx)("button",{className:"hw-send-btn",onClick:()=>P(),disabled:"ready"!==j,children:(0,a.__)("Go","hey-wapuu")})]})]})]})},G=()=>{if("undefined"!=typeof wp&&wp.element){if(document.getElementById("hey-wapuu-root"))return;const t=document.createElement("div");t.id="hey-wapuu-root",document.body.appendChild(t),(0,e.createRoot)(t).render((0,K.jsx)(Y,{}))}};"complete"===document.readyState||"interactive"===document.readyState?G():document.addEventListener("DOMContentLoaded",G)}},a={};function n(e){var s=a[e];if(void 0!==s)return s.exports;var i=a[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,a,s,i)=>{if(!a){var r=1/0;for(l=0;l<e.length;l++){for(var[a,s,i]=e[l],o=!0,u=0;u<a.length;u++)(!1&i||r>=i)&&Object.keys(n.O).every(e=>n.O[e](a[u]))?a.splice(u--,1):(o=!1,i<r&&(r=i));if(o){e.splice(l--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[a,s,i]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var s,i,[r,o,u]=a,c=0;if(r.some(t=>0!==e[t])){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(u)var l=u(n)}for(t&&t(a);c<r.length;c++)i=r[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},a=globalThis.webpackChunkhey_wapuu=globalThis.webpackChunkhey_wapuu||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var s=n.O(void 0,[350],()=>n(298));s=n.O(s)})();